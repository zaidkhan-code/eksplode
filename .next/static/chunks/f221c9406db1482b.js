(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},95187,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={callServer:function(){return n.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return i.findSourceMapURL}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=e.r(32120),i=e.r(92245),l=e.r(35326)},14848,e=>{"use strict";var t=e.i(95187),r=(0,t.createServerReference)("40903c2bd2c23723e4a5b255fbd6e4221e804e58e3",t.callServer,void 0,t.findSourceMapURL,"uploadImageAction");e.s(["uploadImageAction",()=>r])},12426,e=>{"use strict";let t=(0,e.i(75254).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426)},67881,25913,e=>{"use strict";var t=e.i(43476),r=e.i(91918),s=e.i(7670);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=s.clsx,i=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:l}=t,o=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],s=null==l?void 0:l[e];if(null===t)return null;let n=a(t)||a(s);return i[e][n]}),d=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return n(e,o,null==t||null==(s=t.compoundVariants)?void 0:s.reduce((e,t)=>{let{class:r,className:s,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...d}[t]):({...l,...d})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)};e.s(["cva",0,i],25913);var l=e.i(47163);let o=i("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function d({className:e,variant:s,size:a,asChild:n=!1,...i}){let d=n?r.Slot:"button";return(0,t.jsx)(d,{"data-slot":"button",className:(0,l.cn)(o({variant:s,size:a,className:e})),...i})}e.s(["Button",()=>d],67881)},94248,e=>{"use strict";var t=e.i(43476);function r({title:e,description:r,action:s}){return(0,t.jsx)("div",{className:"border-b border-red-900/30 bg-black/50 sticky top-0 z-10",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:e}),r&&(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:r})]})}),s&&(0,t.jsx)("div",{className:"flex-shrink-0",children:s})]})})})}e.s(["PageHeader",()=>r])},94179,e=>{"use strict";var t=e.i(43476),r=e.i(91918),s=e.i(25913),a=e.i(47163);let n=(0,s.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:s,asChild:i=!1,...l}){let o=i?r.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,a.cn)(n({variant:s}),e),...l})}e.s(["Badge",()=>i])},97548,e=>{"use strict";let t=(0,e.i(75254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>t],97548)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],55436)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},14390,e=>{"use strict";var t=e.i(43476),r=e.i(43531),s=e.i(71645),a=e.i(20783),n=e.i(30030),i=e.i(81140),l=e.i(69340),o=e.i(35804),d=e.i(96626),c=e.i(48425),u="Checkbox",[m,p]=(0,n.createContextScope)(u),[x,g]=m(u),f=s.forwardRef((e,r)=>{let{__scopeCheckbox:n,name:o,checked:d,defaultChecked:u,required:m,disabled:p,value:g="on",onCheckedChange:f,form:h,...j}=e,[N,k]=s.useState(null),w=(0,a.useComposedRefs)(r,e=>k(e)),C=s.useRef(!1),P=!N||h||!!N.closest("form"),[S=!1,D]=(0,l.useControllableState)({prop:d,defaultProp:u,onChange:f}),I=s.useRef(S);return s.useEffect(()=>{let e=N?.form;if(e){let t=()=>D(I.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[N,D]),(0,t.jsxs)(x,{scope:n,state:S,disabled:p,children:[(0,t.jsx)(c.Primitive.button,{type:"button",role:"checkbox","aria-checked":v(S)?"mixed":S,"aria-required":m,"data-state":y(S),"data-disabled":p?"":void 0,disabled:p,value:g,...j,ref:w,onKeyDown:(0,i.composeEventHandlers)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.composeEventHandlers)(e.onClick,e=>{D(e=>!!v(e)||!e),P&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),P&&(0,t.jsx)(b,{control:N,bubbles:!C.current,name:o,value:g,checked:S,required:m,disabled:p,form:h,style:{transform:"translateX(-100%)"},defaultChecked:!v(u)&&u})]})});f.displayName=u;var h="CheckboxIndicator";s.forwardRef((e,r)=>{let{__scopeCheckbox:s,forceMount:a,...n}=e,i=g(h,s);return(0,t.jsx)(d.Presence,{present:a||v(i.state)||!0===i.state,children:(0,t.jsx)(c.Primitive.span,{"data-state":y(i.state),"data-disabled":i.disabled?"":void 0,...n,ref:r,style:{pointerEvents:"none",...e.style}})})}).displayName=h;var b=e=>{let r,{control:a,checked:n,bubbles:i=!0,defaultChecked:l,...d}=e,c=s.useRef(null),u=(r=s.useRef({value:n,previous:n}),s.useMemo(()=>(r.current.value!==n&&(r.current.previous=r.current.value,r.current.value=n),r.current.previous),[n])),m=(0,o.useSize)(a);s.useEffect(()=>{let e=c.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==n&&t){let r=new Event("click",{bubbles:i});e.indeterminate=v(n),t.call(e,!v(n)&&n),e.dispatchEvent(r)}},[u,n,i]);let p=s.useRef(!v(n)&&n);return(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l??p.current,...d,tabIndex:-1,ref:c,style:{...e.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function v(e){return"indeterminate"===e}function y(e){return v(e)?"indeterminate":e?"checked":"unchecked"}var j=e.i(47163),N=e.i(82564);function k({data:e,columns:s,selectedRows:a,onRowSelect:n,onRowClick:i,className:l,responsive:o=!0,loading:d=!1,currentPage:c,totalPages:u,onPageChange:m,enableCheckbox:p=!1}){return a?.length===e?.length&&e?.length,(0,t.jsxs)("div",{className:(0,j.cn)("w-full overflow-x-auto rounded-lg border border-red-500/20",l),children:[(0,t.jsxs)("table",{className:"w-full text-sm  border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-red-500/20 bg-black/50",children:[p&&(0,t.jsx)("th",{className:"px-4 py-3 text-left border-r border-red-500/20"}),s.map((e,r)=>(0,t.jsx)("th",{className:(0,j.cn)("px-4 py-3 text-left font-semibold text-gray-400 text-nowrap",e.className,r<s.length-1?"border-r border-red-500/20":""),children:e.label},String(e.key)))]})}),(0,t.jsx)("tbody",{children:d?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:s.length+ +!!p,className:"text-center text-gray-400 py-8",children:(0,t.jsx)(N.default,{})})}):e?.map(e=>{let l=a?.some(t=>t.id===e.id);return(0,t.jsxs)("tr",{onClick:()=>i?.(e),className:(0,j.cn)("border-b border-red-500/10 hover:bg-red-900/10 transition-colors",l&&"bg-red-900/20"),children:[p&&(0,t.jsx)("td",{className:"px-4 py-3 border-r border-red-500/20",children:(0,t.jsx)(f,{checked:l,onCheckedChange:()=>{let t;t=a?.some(t=>t.id===e.id)?a.filter(t=>t.id!==e.id):[...a,e],n?.(t)},className:"w-4 h-4 border border-gray-400 rounded flex items-center justify-center bg-black",children:l&&(0,t.jsx)(r.Check,{className:"w-3 h-3 text-white"})})}),s.map((r,a)=>(0,t.jsx)("td",{className:(0,j.cn)("px-4 py-3 text-white",r.className,a<s.length-1?"border-r border-red-500/20":""),children:r.render?r.render(e[r.key],e):String(e[r.key])},String(r.key)))]},e.id)})})]}),(0,t.jsxs)("div",{className:"flex justify-center items-center gap-2 my-4 text-white",children:[(0,t.jsx)("button",{onClick:()=>m(c-1),disabled:1===c,className:"px-3 py-1 rounded bg-red-600 hover:bg-red-700 disabled:bg-red-900/30",children:"Prev"}),(0,t.jsxs)("span",{className:"px-3 py-1 bg-red-900/20 rounded",children:["Page ",c," of ",u]}),(0,t.jsx)("button",{onClick:()=>m(c+1),disabled:c===u,className:"px-3 py-1 rounded bg-red-600 hover:bg-red-700 disabled:bg-red-900/30",children:"Next"})]})]})}e.s(["DataTable",()=>k],14390)},26999,e=>{"use strict";var t=e.i(71645),r=e.i(81140),s=e.i(20783),a=e.i(30030),n=e.i(10772),i=e.i(69340),l=e.i(26330),o=e.i(65491),d=e.i(74606),c=e.i(96626),u=e.i(48425),m=e.i(3536),p=e.i(85369),x=e.i(86312),g=e.i(91918),f=e.i(43476),h="Dialog",[b,v]=(0,a.createContextScope)(h),[y,j]=b(h),N=e=>{let{__scopeDialog:r,children:s,open:a,defaultOpen:l,onOpenChange:o,modal:d=!0}=e,c=t.useRef(null),u=t.useRef(null),[m=!1,p]=(0,i.useControllableState)({prop:a,defaultProp:l,onChange:o});return(0,f.jsx)(y,{scope:r,triggerRef:c,contentRef:u,contentId:(0,n.useId)(),titleId:(0,n.useId)(),descriptionId:(0,n.useId)(),open:m,onOpenChange:p,onOpenToggle:t.useCallback(()=>p(e=>!e),[p]),modal:d,children:s})};N.displayName=h;var k="DialogTrigger";t.forwardRef((e,t)=>{let{__scopeDialog:a,...n}=e,i=j(k,a),l=(0,s.useComposedRefs)(t,i.triggerRef);return(0,f.jsx)(u.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":U(i.open),...n,ref:l,onClick:(0,r.composeEventHandlers)(e.onClick,i.onOpenToggle)})}).displayName=k;var w="DialogPortal",[C,P]=b(w,{forceMount:void 0}),S=e=>{let{__scopeDialog:r,forceMount:s,children:a,container:n}=e,i=j(w,r);return(0,f.jsx)(C,{scope:r,forceMount:s,children:t.Children.map(a,e=>(0,f.jsx)(c.Presence,{present:s||i.open,children:(0,f.jsx)(d.Portal,{asChild:!0,container:n,children:e})}))})};S.displayName=w;var D="DialogOverlay",I=t.forwardRef((e,t)=>{let r=P(D,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,n=j(D,e.__scopeDialog);return n.modal?(0,f.jsx)(c.Presence,{present:s||n.open,children:(0,f.jsx)(R,{...a,ref:t})}):null});I.displayName=D;var R=t.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,a=j(D,r);return(0,f.jsx)(p.RemoveScroll,{as:g.Slot,allowPinchZoom:!0,shards:[a.contentRef],children:(0,f.jsx)(u.Primitive.div,{"data-state":U(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),z="DialogContent",E=t.forwardRef((e,t)=>{let r=P(z,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,n=j(z,e.__scopeDialog);return(0,f.jsx)(c.Presence,{present:s||n.open,children:n.modal?(0,f.jsx)(O,{...a,ref:t}):(0,f.jsx)(M,{...a,ref:t})})});E.displayName=z;var O=t.forwardRef((e,a)=>{let n=j(z,e.__scopeDialog),i=t.useRef(null),l=(0,s.useComposedRefs)(a,n.contentRef,i);return t.useEffect(()=>{let e=i.current;if(e)return(0,x.hideOthers)(e)},[]),(0,f.jsx)(F,{...e,ref:l,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,r.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:(0,r.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,r.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),M=t.forwardRef((e,r)=>{let s=j(z,e.__scopeDialog),a=t.useRef(!1),n=t.useRef(!1);return(0,f.jsx)(F,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||s.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let r=t.target;s.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),F=t.forwardRef((e,r)=>{let{__scopeDialog:a,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:d,...c}=e,u=j(z,a),p=t.useRef(null),x=(0,s.useComposedRefs)(r,p);return(0,m.useFocusGuards)(),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.FocusScope,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:d,children:(0,f.jsx)(l.DismissableLayer,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":U(u.open),...c,ref:x,onDismiss:()=>u.onOpenChange(!1)})}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(K,{titleId:u.titleId}),(0,f.jsx)(V,{contentRef:p,descriptionId:u.descriptionId})]})]})}),_="DialogTitle",A=t.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,a=j(_,r);return(0,f.jsx)(u.Primitive.h2,{id:a.titleId,...s,ref:t})});A.displayName=_;var T="DialogDescription";t.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,a=j(T,r);return(0,f.jsx)(u.Primitive.p,{id:a.descriptionId,...s,ref:t})}).displayName=T;var B="DialogClose",L=t.forwardRef((e,t)=>{let{__scopeDialog:s,...a}=e,n=j(B,s);return(0,f.jsx)(u.Primitive.button,{type:"button",...a,ref:t,onClick:(0,r.composeEventHandlers)(e.onClick,()=>n.onOpenChange(!1))})});function U(e){return e?"open":"closed"}L.displayName=B;var $="DialogTitleWarning",[H,q]=(0,a.createContext)($,{contentName:z,titleName:_,docsSlug:"dialog"}),K=({titleId:e})=>{let r=q($),s=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return t.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},V=({contentRef:e,descriptionId:r})=>{let s=q("DialogDescriptionWarning"),a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${s.contentName}}.`;return t.useEffect(()=>{let t=e.current?.getAttribute("aria-describedby");r&&t&&(document.getElementById(r)||console.warn(a))},[a,e,r]),null};e.s(["Close",()=>L,"Content",()=>E,"Overlay",()=>I,"Portal",()=>S,"Root",()=>N,"Title",()=>A])},69394,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(67881),a=e.i(23750),n=e.i(94179),i=e.i(94248),l=e.i(14390),o=e.i(47163),d=e.i(97548),c=e.i(40160),u=e.i(55436),m=e.i(46696),p=e.i(98973),x=e.i(12426),g=e.i(37727),f=e.i(69638),h=e.i(31278);function b({selectedRows:e,setOpenPaymentModal:a,onClose:n,fetchLedger:i}){let[l,o]=(0,r.useState)(!1),d=e?.map(e=>e?._id);return(0,t.jsx)("div",{className:`fixed top-0 left-0 right-0 z-50 overflow-hidden transition-all duration-500 ease-in-out
        ${e?.length>0?"max-h-40 sm:max-h-24 opacity-100 translate-y-0":"max-h-0 -translate-y-full"}
      `,children:(0,t.jsxs)("div",{className:"bg-gray-900/95 backdrop-blur-md p-3 sm:p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 border-b border-red-500/20 shadow-lg",children:[(0,t.jsxs)("span",{className:"text-white font-medium text-sm sm:text-base",children:[e?.length," selected"]}),(0,t.jsxs)("div",{className:"   grid grid-cols-2 sm:flex    gap-2 w-full sm:w-auto   ",children:[(0,t.jsxs)(s.Button,{onClick:()=>{a(!0)},className:"bg-green-600 hover:bg-green-700 flex items-center gap-1 justify-center text-sm",children:[(0,t.jsx)(x.DollarSign,{size:16}),(0,t.jsx)("span",{className:"hidden sm:block",children:"Mark as Paid"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Paid"})]}),(0,t.jsxs)(s.Button,{onClick:function(){o(!0),(0,p.default)("admin/bulk-Update-Ledger-Status",{method:"POST",headers:{"Content-Type":"application/json"},data:{ledgerIds:d,status:"available"}},(e,t)=>{o(!1),t?(m.toast.success("ledger is successfully updated!"),i(),n()):m.toast.error(e?.message)})},disabled:l,className:"bg-blue-600 hover:bg-blue-700 flex items-center gap-1 justify-center text-sm disabled:opacity-70",children:[l?(0,t.jsx)(h.Loader2,{size:16,className:"animate-spin"}):(0,t.jsx)(f.CheckCircle,{size:16}),(0,t.jsx)("span",{className:"hidden sm:block",children:l?"Updating...":"Mark as Available"}),(0,t.jsx)("span",{className:"sm:hidden",children:l?"...":"Available"})]}),(0,t.jsx)(s.Button,{onClick:n,variant:"ghost",className:"hover:bg-gray-800 bg-gray-700 text-white rounded-full w-10 h-10 flex items-center justify-center",children:(0,t.jsx)(g.X,{size:18})})]})]})})}var v=e.i(26999),y=e.i(14848);function j({open:e,selectedRows:n=[],onClose:i,fetchLedger:l}){let[d,c]=r.useState(""),[u,x]=r.useState(""),[f,h]=r.useState({}),[b,j]=r.useState({}),[N,k]=r.useState(!1),w=r.useMemo(()=>{let e=new Map;return n.forEach(t=>{let r=t.userId._id;if(e.has(r)){let s=e.get(r);s.amountCents+=t.amountCents||0,s.ledgerIds.push(t._id)}else e.set(r,{userId:r,name:t.userId.name,amountCents:t.amountCents||0,ledgerIds:[t._id],zellePaymentDetails:t.userId.zellePaymentDetails})}),Array.from(e.values())},[n]),C=r.useMemo(()=>n.reduce((e,t)=>e+(t.amountCents||0),0),[n]),P=async(e,t)=>{let r=e.target.files?.[0];if(r){if(r.size>1048576)return void m.toast.error("File too large. Max size is 1MB.");if(!["image/png","image/jpeg","image/jpg","image/webp","application/pdf"].includes(r.type))return void m.toast.error("Only images or PDF allowed.");h(e=>({...e,[t]:!0}));try{let e=new FormData;e.append("image",r);let s=await (0,y.uploadImageAction)(e);s?.url?(j(e=>({...e,[t]:s.url})),m.toast.success(`Proof uploaded for ${t}`)):m.toast.error("Upload failed.")}catch(e){m.toast.error("Upload failed.")}finally{h(e=>({...e,[t]:!1}))}}};return(0,t.jsx)(v.Root,{open:e,children:(0,t.jsx)(v.Portal,{children:(0,t.jsx)("div",{className:"fixed inset-0 flex z-[999999999] items-center justify-center p-4",children:(0,t.jsxs)(v.Content,{className:"   w-full max-w-3xl max-h-[80vh] rounded-2xl bg-zinc-900 text-zinc-100    border border-zinc-800 shadow-2xl p-6 overflow-y-auto   ",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)(v.Title,{className:"text-xl font-bold",children:"Bulk Payment Summary"}),(0,t.jsx)(v.Close,{asChild:!0,children:(0,t.jsx)("button",{className:"text-zinc-400 hover:text-white",onClick:i,children:(0,t.jsx)(g.X,{size:22})})})]}),(0,t.jsxs)("div",{className:"bg-zinc-800/60 rounded-lg p-4 mb-4 border border-zinc-700 max-h-80 overflow-y-auto",children:[(0,t.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Selected Users"}),w.length>0?(0,t.jsx)("ul",{className:"text-sm divide-y divide-zinc-700/50",children:w.map(e=>(0,t.jsxs)("li",{className:"py-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-zinc-400",children:[e.ledgerIds.length," ledger(s)"]}),e.zellePaymentDetails&&(0,t.jsxs)("div",{className:"mt-1 text-xs text-blue-300",children:["Payment Details",(0,t.jsxs)("div",{children:["Email: ",e.zellePaymentDetails.email||"—"]}),(0,t.jsxs)("div",{children:["Phone:"," ",e.zellePaymentDetails.phoneNumber||"—"]})]})]}),(0,t.jsx)("div",{className:"text-green-400 font-semibold",children:(0,o.formatCurrency)(e.amountCents)})]}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("input",{type:"file",accept:"image/*,application/pdf",onChange:t=>P(t,e.userId),className:"w-full text-xs text-zinc-400    file:px-4 file:py-2 file:rounded-md    file:bg-blue-600 file:text-white hover:file:bg-blue-700"}),f[e.userId]&&(0,t.jsx)("p",{className:"text-xs text-blue-400 mt-1",children:"Uploading..."}),b[e.userId]&&(0,t.jsx)("div",{className:"mt-2",children:b[e.userId].endsWith(".pdf")?(0,t.jsx)("a",{href:b[e.userId],target:"_blank",className:"text-xs underline",children:"Open PDF proof"}):(0,t.jsx)("img",{src:b[e.userId],className:"w-28 h-28 rounded-lg border border-zinc-700 object-cover"})})]})]},e.userId))}):(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:"No users selected"})]}),(0,t.jsxs)("div",{className:"mb-4 text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:"Total Balance: "}),(0,t.jsx)("span",{className:"text-green-400 font-semibold",children:(0,o.formatCurrency)(C)})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm mb-1 text-zinc-400",children:"Payment Method"}),(0,t.jsx)(a.Input,{value:u,onChange:e=>x(e.target.value),placeholder:"Bank Transfer, Walmart, etc."})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm mb-1 text-zinc-400",children:"Notes"}),(0,t.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),className:"w-full h-24 text-sm rounded-md bg-zinc-800 border border-zinc-700 p-2",placeholder:"Notes for all users..."})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)(s.Button,{variant:"ghost",onClick:i,children:"Cancel"}),(0,t.jsx)(s.Button,{disabled:N,onClick:()=>{if(N)return;k(!0);let e=w.map(e=>({userId:e.userId,ledgerIds:e.ledgerIds,amountCents:e.amountCents,proofUrl:b[e.userId]||null,notes:d}));(0,p.default)("admin/bulk-update-ledger",{method:"POST",headers:{"Content-Type":"application/json"},data:{paymentMethod:u,users:e}},(e,t)=>{t?(m.toast.success("Payouts created successfully!"),i(),l(),c(""),x(""),j({}),k(!1)):(k(!1),m.toast.error(e?.message))})},children:N?"Processing...":"Create Payouts & Mark Paid"})]})]})})})})}function N(){let[e,x]=(0,r.useState)([]),[g,f]=(0,r.useState)("all"),[h,v]=(0,r.useState)(""),[y,N]=(0,r.useState)(!1),[k,w]=(0,r.useState)(1),[C]=(0,r.useState)(20),[P,S]=(0,r.useState)(1),[D,I]=(0,r.useState)(!1),[R,z]=(0,r.useState)([]),E=(e=1)=>{N(!0),(0,p.default)(`admin/ledger?page=${e}&limit=${C}${"all"!==g?`&status=${g}`:""}${h?`&userId=${h}`:""}`,{method:"GET"},(e,t)=>{N(!1),t&&e.success?(x(e.entries),w(e.currentPage),S(e.totalPages)):m.toast.error(e?.message||"Failed to fetch ledger!")})};function O(){I(!1),z([])}(0,r.useEffect)(()=>{E(1)},[g,h]);let M=[{key:"userName",label:"User Name",render:(e,t)=>t.userId.name},{key:"userName",label:"Email",render:(e,t)=>t.userId.email},{key:"amountCents",label:"Amount",render:(e,r)=>(0,t.jsxs)("span",{className:"credit"===r.type?"text-green-400":"text-red-400",children:["credit"===r.type?"+":"-",(0,o.formatCurrency)(r.amountCents)]})},{key:"status",label:"Status",render:e=>(0,t.jsx)(n.Badge,{className:`${{pending:"bg-yellow-600",available:"bg-green-600",paid:"bg-blue-600"}[e]} text-white`,children:e})},{key:"notes",label:"Notes"},{key:"createdAt",label:"Date",render:e=>(0,o.formatDate)(e)}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"min-h-screen bg-black relative",children:[(0,t.jsx)(i.PageHeader,{title:"Ledger",description:"View all system transactions",action:(0,t.jsxs)(s.Button,{className:"gap-2 bg-red-600 hover:bg-red-700",children:[(0,t.jsx)(c.Download,{className:"w-4 h-4"}),"Export"]})}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:(0,t.jsxs)("div",{className:"flex-1 min-w-64 relative",children:[(0,t.jsx)(u.Search,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),(0,t.jsx)(a.Input,{placeholder:"Search by username or user ID...",value:h,onChange:e=>v(e.target.value),className:"pl-10 bg-black border-red-500/20 text-white"})]})}),(0,t.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,t.jsxs)(s.Button,{onClick:()=>f("all"),className:"all"===g?"bg-red-600 hover:bg-red-700":"border-red-500/30 text-gray-400 hover:text-white hover:bg-red-900/20",children:[(0,t.jsx)(d.Filter,{className:"w-4 h-4"}),"All Entries"]}),["pending","available","paid"].map(e=>(0,t.jsx)(s.Button,{onClick:()=>f(e),className:g===e?"bg-red-600 hover:bg-red-700":"border-red-500/30 text-gray-400 hover:text-white hover:bg-red-900/20",children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(0,t.jsx)(l.DataTable,{data:e.map(e=>({...e,id:e._id})),loading:y,columns:M,currentPage:k,selectedRows:R,totalPages:P,enableCheckbox:!0,onRowSelect:e=>{z(e)},onPageChange:e=>{E(e)}})]})})]}),(0,t.jsx)(b,{selectedRows:R,onClose:O,setOpenPaymentModal:I,fetchLedger:E}),(0,t.jsx)(j,{selectedRows:R,open:D,fetchLedger:E,onClose:O})]})}e.s(["default",()=>N],69394)}]);